<!doctype html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8" />
	
		<title>Pião da Casa Própria em CSS 3D – Loop Infinito</title>
	
	
		<meta name="author" content="Caio Gondim" />
	
	
		<meta name="keywords" content="silvio santos css3 3d html5 frontend web development" />
	
	
		<meta name="description" content="Quem não lembra do lendário programa do Silvio Santos Pião da Casa Própria? Neste post vamos trazer esta lenda de volta a vida, desta vez encarnado em puro código HTML5, sem imagens ou plugins." />
	
	<meta name="language" content="pt" />
	<meta name="content-language" content="pt-BR" />
	<meta name="robots" content="all" />
	<meta name="distribution" content="Global" />
	<meta name="resource-type" content="document" />
	
	<link rel="icon" type="image/png" href="/images/favicon.png" />
	<link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/l8p" title="Loop Infinito" />
	<link rel="stylesheet" type="text/css" href="/styles/blog.css" media="all" />
	<script type="text/javascript" src="/scripts/jquery.min.js"></script>
	<script type="text/javascript">
		
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-30127419-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</head>
<body>
	<ul id="links">
		<li class="twitter">
			<div><a href="http://twitter.com/loopinfinito"><img src="/images/icons/twitter.png" alt="" /></a></div>
			<span>siga o <strong>Twitter</strong></span>
		</li>
		<li class="fork">
			<div><a href="https://github.com/loopinfinito/loopinfinito.com.br"><img src="/images/icons/fork.png" alt="" /></a></div>
			<span>fork me on <strong>GitHub</strong></span>
		</li>
		<li class="rss">
			<div><a href="http://feeds.feedburner.com/l8p"><img src="/images/icons/rss.png" alt="" /></a></div>
			<span>assine o <strong>Feed</strong></span>
		</li>
	</ul>
	<div id="wrapper">
		<header id="main">
			<h1><a href="/" id="logo">Loop Infinito</a></h1>
			<nav>
				<ul>
					<li><a href="/" class="menu-ativo">Posts</a></li>
					<li><a href="/projetos" >Projetos</a></li>
					<li><a href="/sobre" >Sobre</a></li>
				</ul>
			</nav>
		</header>

		<section id="content">

			<section class="post-container" itemscope itemtype="http://schema.org/BlogPosting">
				<span class="hidden" itemprop="publisher">Loop Infinito</span>
				<aside class="post-meta">
					<ul>
						<li class="post-data">
							<span class="icon-aside"></span>
							<time itemprop="datePublished" datetime="2012-05-13">13/05/2012</time>
						</li>
						<li class="post-autor">
							<span class="icon-aside"></span>
							<a href="http://twitter.com/caio_gondim" title="Caio Gondim" alt="Caio Gondim" rel="author" itemprop="author">Caio Gondim</a>
						</li>
						
						<li class="post-comentarios">
							<span class="icon-aside"></span>
							<a href="/2012/05/13/piao-da-casa-propria-em-css-3d/#disqus_thread" data-disqus-identifier="/2012/05/13/piao-da-casa-propria-em-css-3d" itemprop="interactionCount">Carregando...</a>
						</li>
						
						
						<li class="post-tags">
							<span class="icon-aside"></span>
							<ul>
								
								<li><a href="/tag/CSS"><span>#</span>CSS</a></li>,
								
								<li><a href="/tag/3D"><span>#</span>3D</a></li>,
								
								<li><a href="/tag/HTML5"><span>#</span>HTML5</a></li>
													
							</ul>
							
							<span class="hidden" itemprop="keywords">silvio santos css3 3d html5 frontend web development</span>
							
						</li>
						
					</ul>	
				</aside>
				<article>
					<header>
						<h1><a href="/2012/05/13/piao-da-casa-propria-em-css-3d/" itemprop="headline">Pião da Casa Própria em <span>CSS 3D</span></a></h1>
					</header>
					<section itemprop="articleBody">
						<p>Quem não lembra do <strong>lendário</strong> programa do Silvio Santos <a href='http://www.youtube.com/watch?v=X0YAnNNK2OE'>Pião da Casa Própria</a>? Neste post vamos trazer esta lenda de volta a vida, desta vez encarnado em puro código HTML5, sem imagens ou plugins. Se seu navegador for o Chrome, Safari ou Firefox atualizados, você poderá ver abaixo como nosso experimento irá ficar ao final deste post.</p>
<iframe class='img' frameborder='0' id='experimento-piao' src='http://caiogondim.github.com/piao-da-casa-propria-em-css-3d/' style='height:432px;'> </iframe>
<p>Todo o código deste experimento está disponível no <a href='https://github.com/caiogondim/piao-da-casa-propria-em-css-3d'>GitHub</a> e um preview completo pode ser visto <a href='http://caiogondim.github.com/piao-da-casa-propria-em-css-3d/'>aqui</a>.</p>

<h2 id='a_brincadeira__muito_fcil'>A brincadeira é muito fácil</h2>

<p>Vamos começar com o código HTML. Apenas uma <code>div</code> contendo 6 outras <code>div</code>, uma para cada face do pião, a <code>div</code> wrapper, que servirá de container para o pião, e mais uma última para a moldura do pião.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;wrapper&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;piao&quot;</span><span class='nt'>&gt;</span>
    <span class='c'>&lt;!-- todas as faces do pião --&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;numero um&quot;</span><span class='nt'>&gt;</span>1<span class='nt'>&lt;/div&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;numero dois&quot;</span><span class='nt'>&gt;</span>2<span class='nt'>&lt;/div&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;numero tres&quot;</span><span class='nt'>&gt;</span>3<span class='nt'>&lt;/div&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;numero quatro&quot;</span><span class='nt'>&gt;</span>4<span class='nt'>&lt;/div&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;numero cinco&quot;</span><span class='nt'>&gt;</span>5<span class='nt'>&lt;/div&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;numero seis&quot;</span><span class='nt'>&gt;</span>6<span class='nt'>&lt;/div&gt;</span>        
  <span class='nt'>&lt;/div&gt;</span>
  <span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;moldura&quot;</span><span class='nt'>&gt;</span> <span class='nt'>&lt;/div&gt;</span>
<span class='nt'>&lt;/div&gt;</span>
</code></pre>
</div>
<p>Agora vamos dar um pouco de estilo ao pião e à moldura.</p>
<div class='highlight'><pre><code class='css'><span class='nf'>#wrapper</span> <span class='p'>{</span>
  <span class='k'>width</span><span class='o'>:</span> <span class='m'>400px</span><span class='p'>;</span>
  <span class='k'>height</span><span class='o'>:</span> <span class='m'>400px</span><span class='p'>;</span>
  <span class='k'>position</span><span class='o'>:</span> <span class='k'>absolute</span><span class='p'>;</span>
  <span class='k'>left</span><span class='o'>:</span> <span class='m'>50</span><span class='o'>%</span><span class='p'>;</span>
  <span class='k'>top</span><span class='o'>:</span> <span class='m'>50</span><span class='o'>%</span><span class='p'>;</span>
  <span class='k'>margin-left</span><span class='o'>:</span> <span class='m'>-200px</span><span class='p'>;</span>
  <span class='k'>margin-top</span><span class='o'>:</span> <span class='m'>-200px</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='p'>{</span>
  <span class='k'>position</span><span class='o'>:</span> <span class='k'>relative</span><span class='p'>;</span>
  <span class='k'>top</span><span class='o'>:</span> <span class='m'>40px</span><span class='p'>;</span> <span class='c'>/* centraliza o pião */</span>
  <span class='k'>margin</span><span class='o'>:</span> <span class='m'>0</span> <span class='k'>auto</span><span class='p'>;</span> <span class='c'>/* centraliza o pião */</span>
  <span class='k'>height</span><span class='o'>:</span> <span class='m'>330px</span><span class='p'>;</span>
  <span class='k'>width</span><span class='o'>:</span> <span class='m'>200px</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='nc'>.numero</span> <span class='p'>{</span>
  <span class='k'>position</span><span class='o'>:</span> <span class='k'>absolute</span><span class='p'>;</span>
  <span class='k'>height</span><span class='o'>:</span> <span class='m'>100</span><span class='o'>%</span><span class='p'>;</span>
  <span class='k'>width</span><span class='o'>:</span> <span class='m'>200px</span><span class='p'>;</span>
  <span class='k'>border</span><span class='o'>:</span> <span class='m'>6px</span> <span class='k'>solid</span> <span class='nb'>white</span><span class='p'>;</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>box</span><span class='o'>-</span><span class='n'>sizing</span><span class='o'>:</span> <span class='k'>border</span><span class='o'>-</span><span class='n'>box</span><span class='p'>;</span>
  <span class='k'>text-align</span><span class='o'>:</span> <span class='k'>center</span><span class='p'>;</span>
  <span class='k'>line-height</span><span class='o'>:</span> <span class='m'>320px</span><span class='p'>;</span>
  <span class='k'>font-family</span><span class='o'>:</span> <span class='n'>Impact</span><span class='o'>,</span> <span class='k'>sans-serif</span><span class='p'>;</span>
  <span class='k'>font-size</span><span class='o'>:</span> <span class='m'>240px</span><span class='p'>;</span>
  <span class='k'>color</span><span class='o'>:</span> <span class='nb'>white</span><span class='p'>;</span>
  <span class='k'>background-color</span><span class='o'>:</span> <span class='k'>rgb</span><span class='p'>(</span><span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#moldura</span> <span class='p'>{</span>
  <span class='k'>height</span><span class='o'>:</span> <span class='m'>400px</span><span class='p'>;</span>
  <span class='k'>width</span><span class='o'>:</span> <span class='m'>400px</span><span class='p'>;</span>
  <span class='k'>border</span><span class='o'>:</span> <span class='m'>50px</span> <span class='k'>solid</span> <span class='k'>rgb</span><span class='p'>(</span><span class='m'>200</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='p'>);</span>
  <span class='k'>border</span><span class='o'>-</span><span class='n'>radius</span><span class='o'>:</span> <span class='m'>250px</span><span class='p'>;</span>
  <span class='k'>position</span><span class='o'>:</span> <span class='k'>absolute</span><span class='p'>;</span>
  <span class='k'>top</span><span class='o'>:</span> <span class='m'>-45px</span><span class='p'>;</span>
  <span class='k'>left</span><span class='o'>:</span> <span class='m'>-50px</span><span class='p'>;</span>
  <span class='c'>/* </span>
<span class='c'>    1ª shadow: simula 3D no elemento, na parte interna</span>
<span class='c'>    2ª shadow: shadow interna para simular profundidade</span>
<span class='c'>    3ª shadow: simula 3D no elemento, na parte externa</span>
<span class='c'>    4ª shadow: shadow externa para simular profundidade </span>
<span class='c'>  */</span>
  <span class='n'>box</span><span class='o'>-</span><span class='n'>shadow</span><span class='o'>:</span> 
    <span class='k'>inset</span> <span class='m'>-1px</span> <span class='m'>-2px</span> <span class='m'>0px</span> <span class='m'>3px</span> <span class='k'>rgb</span><span class='p'>(</span><span class='m'>150</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='p'>)</span><span class='o'>,</span>
    <span class='k'>inset</span> <span class='m'>-1px</span> <span class='m'>-2px</span> <span class='m'>10px</span> <span class='m'>10px</span> <span class='n'>rgba</span><span class='p'>(</span><span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>.</span><span class='m'>5</span><span class='p'>)</span><span class='o'>,</span> 
    <span class='m'>-2px</span> <span class='m'>-2px</span> <span class='m'>0px</span> <span class='m'>3px</span> <span class='k'>rgb</span><span class='p'>(</span><span class='m'>150</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='p'>)</span><span class='o'>,</span>
    <span class='m'>-4px</span> <span class='m'>-4px</span> <span class='m'>10px</span> <span class='m'>10px</span> <span class='n'>rgba</span><span class='p'>(</span><span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>,</span> <span class='m'>0</span><span class='o'>.</span><span class='m'>5</span><span class='p'>);</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>Agora já podemos ver algo sem graça no browser com o código acima: um número 6 dentro de um círculo vermelho com um efeito 3D simulado.</p>

<h2 id='posio_no_plano_3d'>Posição no plano 3D</h2>

<p>Vamos agora posicionar o pião no plano 3D. Mas antes uma breve explicação sobre o plano 3D em CSS.</p>

<p>Temos 3 eixos de coordenadas para posicionarmos os elementos relativos a eles. O eixo <strong>X é o eixo horizontal</strong> (esquerda-direita) e tem sua origem no ponto mais a esquerda. O eixo <strong>Y é o eixo vertical</strong> (cima-baixo) e, diferente de um plano cartesiano comum, tem seu início na parte mais acima do navegador. Portanto, o ponto do seu navegador mais acima e a esquerda é o ponto de coordenadas X = 0 e Y = 0.</p>

<p>Mas para objetos 3D nós precisamos de mais um eixo, o eixo <strong>Z</strong>, que vai nos dar a sensação de <strong>profundidade</strong>. Este eixo se inicia no monitor e cresce no sentido monitor &rarrw; você. Então, quanto mais &#8220;distante&#8221; do monitor o objeto aparentar estar, maior o valor de Z.</p>

<p>Agora entendendo um pouco sobre o plano 3D, vamos organizar os elementos a fim de formar o pião.</p>
<div class='highlight'><pre><code class='css'><span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.um</span> <span class='p'>{</span>
  <span class='c'>/* </span>
<span class='c'>    a rotação deste elemento é 0, o que já é o valor padrão</span>
<span class='c'>    então não há necessidade de redeclarar sua rotação</span>
<span class='c'>   */</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.dois</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>60</span><span class='n'>deg</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.tres</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>120</span><span class='n'>deg</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.quatro</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>180</span><span class='n'>deg</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.cinco</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>240</span><span class='n'>deg</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.seis</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>300</span><span class='n'>deg</span><span class='p'>);</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>No trecho de CSS acima, nós giramos as faces em relação ao eixo Y. Precisamos girar todas as faces a fim de fecharmos uma volta. Como uma volta possui 360 graus e o pião possui 6 faces, então iremos rotacionar cada face em 60 graus mais a rotação da face anterior, ou seja, o primeiro elemento irá ser rotacionado em 60 graus, o segundo em 120 graus, o terceiro em 180 graus, e assim por diante até o último elemento.</p>

<p>Porém se rotacionarmos apenas no eixo Y os elementos, eles ficarão todos um por cima dos outros, apenas inclinados de forma diferente. Estarão todos no centro do que será nosso pião. Precisamos agora afastar as faces umas das outras. E para isso iremos usar a propriedade <code>translateZ</code>.</p>
<div class='highlight'><pre><code class='css'><span class='nf'>#piao</span> <span class='p'>{</span>
  <span class='o'>...</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>-</span><span class='n'>style</span><span class='o'>:</span> <span class='n'>preserve</span><span class='m'>-3</span><span class='err'>d</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.um</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>translateZ</span><span class='p'>(</span><span class='m'>170px</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.dois</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>60</span><span class='n'>deg</span><span class='p'>)</span> <span class='n'>translateZ</span><span class='p'>(</span><span class='m'>170px</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.tres</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>120</span><span class='n'>deg</span><span class='p'>)</span> <span class='n'>translateZ</span><span class='p'>(</span><span class='m'>170px</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.quatro</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>180</span><span class='n'>deg</span><span class='p'>)</span> <span class='n'>translateZ</span><span class='p'>(</span><span class='m'>170px</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.cinco</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>240</span><span class='n'>deg</span><span class='p'>)</span> <span class='n'>translateZ</span><span class='p'>(</span><span class='m'>170px</span><span class='p'>);</span>
<span class='p'>}</span>

<span class='nf'>#piao</span> <span class='o'>&gt;</span> <span class='nc'>.numero.seis</span> <span class='p'>{</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>300</span><span class='n'>deg</span><span class='p'>)</span> <span class='n'>translateZ</span><span class='p'>(</span><span class='m'>170px</span><span class='p'>);</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>Com o <code>transform-style: preserve-3d</code> estamos dizendo que os filhos diretos do elemento pião irão compartilhar o mesmo espaço 3D que o pai. Caso contrário os elementos seriam renderizados de forma plana no elemento pai.</p>

<p>Depois, com a regra <code>translateZ</code>, estamos afastanto todos os elementos do seu ponto inicial no eixo Z. Com o <code>rotateY</code> giramos todas as faces e com o <code>translateZ</code> é como se estivéssemos pedindo para que todas as faces dessem um passo de 170px à frente. Como giramos todas para um lado diferente, elas irão &#8220;caminhar&#8221; para um sentido diferente.</p>

<p>Com isso temos o nosso pião 3D, mas para deixar tudo mais interessante, vamos usar <code>animation</code> para fazer a rotação do pião.</p>

<h2 id='animao_em_ritmo_de_festa'>Animação em ritmo de festa</h2>

<p>O efeito que queremos ver é o do pião rodando em relação ao seu eixo Y, o mesmo eixo em que rotacionamos as faces do pião. Para isso iremos criar uma animação com o estado inicial no ponto 0 graus do eixo Y e estado final no 360 graus, ou seja, uma volta completa.</p>
<div class='highlight'><pre><code class='css'><span class='c'>/* </span>
<span class='c'>  animação para o pião rodar </span>
<span class='c'>  uma animação básica ao redor do eixo Y</span>
<span class='c'>*/</span>
<span class='k'>@-webkit-keyframes</span> <span class='nt'>rodando</span> <span class='p'>{</span>
  <span class='nt'>from</span> <span class='p'>{</span> <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>0</span><span class='p'>);</span> <span class='p'>}</span>
  <span class='nt'>to</span>   <span class='p'>{</span> <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transform</span><span class='o'>:</span> <span class='n'>rotateY</span><span class='p'>(</span><span class='m'>-360</span><span class='n'>deg</span><span class='p'>);</span> <span class='p'>}</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>No trecho acima definimos nossa animação e a chamamos de rodando (em homenagem). Agora é só a usarmos no elemento que desejarmos.</p>
<div class='highlight'><pre><code class='css'><span class='nf'>#piao</span> <span class='p'>{</span>
  <span class='o'>...</span>
  <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>animation</span><span class='o'>:</span> <span class='n'>rodando</span> <span class='m'>4s</span> <span class='n'>infinite</span> <span class='n'>linear</span><span class='p'>;</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>Aqui dizemos que queremos animar o elemento pião, utilizando a animação &#8220;rodando&#8221;, demorando 4 segundos para ir de seu estado inicial ao estado final, essa animação não irá parar (infinite) e a sua transição entre estados será linear.</p>

<p>Agora se checarmos no navegador, iremos finalmente ter nosso pião da casa própria em HTML5. E rodandooo.</p>

<h2 id='one_more_thing'>One more thing&#8230;</h2>

<p>O Pião da Casa Própria não seria o mesmo sem a <strong>clássica</strong> trilha sonnora. Então vamos adicioná-la ao experimento. Iremos usar a nova tag <code>audio</code> para reproduzir a música sem a nececissade do Flash. <!-- O seu uso é bastante simples.  --> Basta declarar a tag <code>audio</code> e dentro dela as tags <code>source</code> com os caminhos para o mesmo arquivo salvo em diferentes codecs.</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- trilha do pião da casa própria. máá ô-ê --&gt;</span>
<span class='nt'>&lt;audio</span> <span class='na'>preload=</span><span class='s'>&quot;auto&quot;</span> <span class='na'>loop=</span><span class='s'>&quot;true&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;source</span> <span class='na'>src=</span><span class='s'>&quot;piao-da-casa-propria-soundtrack.mp3&quot;</span> <span class='nt'>/&gt;</span>
  <span class='nt'>&lt;source</span> <span class='na'>src=</span><span class='s'>&quot;piao-da-casa-propria-soundtrack.m4a&quot;</span> <span class='nt'>/&gt;</span>
  <span class='nt'>&lt;source</span> <span class='na'>src=</span><span class='s'>&quot;piao-da-casa-propria-soundtrack.ogg&quot;</span> <span class='nt'>/&gt;</span>
<span class='nt'>&lt;/audio&gt;</span>
</code></pre>
</div>
<p>O navegador irá tentar de cima para baixo executar os formatos, e quando achar um que possa reproduzir, irá carregar e não irá mais procurar por outros <code>source</code>. O uso desta tag é necessário pois cada navegador dá suporte a um <a href='http://html5doctor.com/native-audio-in-the-browser/'>diferente conjunto de codecs</a>.</p>

<p>Caso queiram escutar a trilha sonora agora e ver o pião rodando é só apertar o botão play no lado direito superior dentro do experimento, no <a href='#experimento-piao'>início</a> do post. Utilizei a API JavaScript para controlar o comportamento da tag <code>audio</code>, mas para não perdemos o foco, essa API fica para um próximo post. <!-- 
Existe também uma API JavaScript para controlar por programação o áudio, mas para não perdemos o foco do post não vamos entrar em detalhes.
Se quiser escutar a trilha sonora, basta apertar o botão _play_ no experimento logo no começo do post.
É necessário esperar fazer o download da música. --></p>
<aside class='fonte'>
  <h3>Referência</h3>
  <ul>    
    <li>→<a alt='Mozilla Developer Network' href='https://developer.mozilla.org/En/HTML/Element/Audio' title='Mozilla Developer Network'>Mozilla Developer Network: audio</a></li>
    <li>→<a alt='Mozilla Developer Network' href='https://developer.mozilla.org/en/CSS/transform-style' title='Mozilla Developer Network'>Mozilla Developer Network: transform style</a></li>
    <li>→<a alt='Webkit Morphing Cubes' href='http://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html' title='Webkit Morphing Cubes'>WebKit blog</a></li>  
  </ul>
</aside>				
					</section>
					
					<footer id="disqus_thread">
						<noscript>Por favor, habilite JavaScript para ver os comentários. <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
					</footer>
					
				</article>
			</section>

			
				<section id="disqus-power">
					<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
				</section>
			

		</section>

	</div>
	
		<script type="text/javascript">
		    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		    var disqus_shortname = 'loopinfinito'; // required: replace example with your forum shortname
		    var disqus_identifier = '/2012/05/13/piao-da-casa-propria-em-css-3d';
		    // var disqus_developer = 1;

		    // callback do Disqus
		    function disqus_callback() {
		    	// modifica o título da caixa de comentários
		    	$('#dsq-reply h3').html('Comentários')

		    	//
		    	// $('#dsq-comments').find('span.dsq-like-thumb').css({ position: 'relative', bottom: '5px' })
		    }

		    /* * * DON'T EDIT BELOW THIS LINE * * */
		    (function() {
		        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

		        // comment count
		        var s = document.createElement('script'); s.async = true;
		        s.type = 'text/javascript';
		        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
		        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
		    })();
		</script>
	
</body>
</html>